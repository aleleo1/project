---
import { query } from '../db/mysql-adapter'
import Container from './Container'
const params = new URL(Astro.request.url).searchParams
const q = params.get('q')! ?? 'q1'
const rif = params.get('rif')! ? new Date(params.get('rif')!) : new Date()
let date = new Date()

if (params.get('data')){
	date = new Date(params.get('data')!)
}
else {
	date.setMonth(date.getMonth() - 6)
}

const result = (await query(date, q!, rif))
---

	<Container data={result} initialState={[q, date, rif]} client:only="solid-js"></Container>
